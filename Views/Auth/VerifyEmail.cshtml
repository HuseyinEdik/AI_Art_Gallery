@{
    Layout = "_Layout"; 
    ViewData["Title"] = "Email Doðrulama";
}

<div class="row justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="col-md-5">
        <div class="card border-0 shadow-lg rounded-4" style="background-color: #1e1e1e;">
            <div class="card-body p-5">

                <div class="text-center mb-4">
                    <div class="d-inline-flex align-items-center justify-content-center p-3 rounded-circle mb-3"
                         style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 70px; height: 70px;">
                        <i class="fa-solid fa-envelope-circle-check fa-2x text-white"></i>
                    </div>
                    <h2 class="text-white fw-bold">Email Doðrulama</h2>
                    <p class="text-secondary">Email adresinize gönderilen 6 haneli kodu girin.</p>
                </div>

                @if (TempData["SuccessMessage"] != null)
                {
                    <div class="alert alert-success text-center py-2 mb-4">
                        <i class="fa-solid fa-check-circle me-2"></i>@TempData["SuccessMessage"]
                    </div>
                }

                @if (TempData["ErrorMessage"] != null)
                {
                    <div class="alert alert-warning text-center py-2 mb-4">
                        <i class="fa-solid fa-triangle-exclamation me-2"></i>@TempData["ErrorMessage"]
                    </div>
                }

                @if (ViewBag.Error != null)
                {
                    <div class="alert alert-danger text-center py-2 mb-4">
                        <i class="fa-solid fa-circle-exclamation me-2"></i>@ViewBag.Error
                    </div>
                }

                <div class="alert alert-info d-flex align-items-center mb-4" role="alert">
                    <i class="fa-solid fa-info-circle me-2"></i>
                    <div>
                        <strong>@ViewBag.Email</strong> adresine doðrulama kodu gönderildi.
                    </div>
                </div>

                <form asp-action="VerifyEmail" method="post">
                    <input type="hidden" name="email" value="@ViewBag.Email" />

                    <div class="mb-4">
                        <label class="form-label text-secondary small fw-bold">DOÐRULAMA KODU</label>
                        <input type="text" name="verificationCode" 
                               class="form-control bg-dark text-white border-secondary py-3 text-center" 
                               placeholder="000000" 
                               maxlength="6" 
                               pattern="[0-9]{6}"
                               style="font-size: 1.5rem; letter-spacing: 0.5rem;"
                               required 
                               autofocus />
                        <small class="text-muted">6 haneli sayýsal kod</small>
                    </div>

                    <button type="submit" class="btn btn-primary-custom w-100 py-2 rounded-pill fw-bold mb-3">
                        <i class="fa-solid fa-check me-2"></i>Doðrula
                    </button>
                </form>

                <div class="text-center mt-4">
                    <p class="text-secondary small mb-2">Kod gelmedi mi?</p>
                    <form asp-action="ResendVerificationCode" method="post" class="d-inline">
                        <input type="hidden" name="email" value="@ViewBag.Email" />
                        <button type="submit" class="btn btn-outline-secondary btn-sm rounded-pill px-4">
                            <i class="fa-solid fa-rotate-right me-2"></i>Tekrar Gönder
                        </button>
                    </form>
                </div>

                <hr class="border-secondary my-4" />

                <div class="text-center">
                    <a asp-action="Register" class="text-secondary text-decoration-none small">
                        <i class="fa-solid fa-arrow-left me-2"></i>Kayýt sayfasýna dön
                    </a>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <div class="card border-0" style="background-color: #1e1e1e;">
                <div class="card-body p-3">
                    <p class="text-secondary small mb-2">
                        <i class="fa-solid fa-shield-halved me-2"></i>
                        <strong>Güvenlik Ýpucu:</strong>
                    </p>
                    <p class="text-muted small mb-0">
                        Doðrulama kodunu kimseyle paylaþmayýn. 
                        Kod 15 dakika içinde geçerliliðini yitirecektir.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Doðrulama kodu input animasyonu */
    input[name="verificationCode"]:focus {
        box-shadow: 0 0 15px rgba(102, 126, 234, 0.5);
        border-color: #667eea !important;
    }
</style>
